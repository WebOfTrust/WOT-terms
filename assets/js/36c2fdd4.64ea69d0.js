"use strict";(self.webpackChunkwot_terms_docusaurus=self.webpackChunkwot_terms_docusaurus||[]).push([[25213],{15680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>y});var r=t(96540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),m=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=m(e.components);return r.createElement(l.Provider,{value:n},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=m(t),c=a,y=u["".concat(l,".").concat(c)]||u[c]||f[c]||i;return t?r.createElement(y,o(o({ref:n},p),{},{components:t})):r.createElement(y,o({ref:n},p))}));function y(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=c;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[u]="string"==typeof e?e:a,o[1]=s;for(var m=2;m<i;m++)o[m]=t[m];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},8417:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>f,frontMatter:()=>i,metadata:()=>s,toc:()=>m});var r=t(58168),a=(t(96540),t(15680));const i={},o=void 0,s={unversionedId:"glossary/ample",id:"glossary/ample",title:"ample",description:"Definition",source:"@site/docs/04_glossary/ample.md",sourceDirName:"04_glossary",slug:"/glossary/ample",permalink:"/WOT-terms/docs/glossary/ample",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ambient-verifiability",permalink:"/WOT-terms/docs/glossary/ambient-verifiability"},next:{title:"append-only-event-logs",permalink:"/WOT-terms/docs/glossary/append-only-event-logs"}},l={},m=[{value:"Definition",id:"definition",level:2},{value:"More",id:"more",level:2},{value:"Problems avoided by using <code>ample</code>",id:"problems-avoided-by-using-ample",level:3},{value:"Table of minimum required, or ample, number of participants",id:"table-of-minimum-required-or-ample-number-of-participants",level:2},{value:"Code Example",id:"code-example",level:3}],p={toc:m},u="wrapper";function f(e){let{components:n,...t}=e;return(0,a.yg)(u,(0,r.A)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h2",{id:"definition"},"Definition"),(0,a.yg)("p",null,"The minimum required number of participants in an event to have a ",(0,a.yg)("a",{parentName:"p",href:"supermajority"},"supermajority")," so that one and only one agreement or consensus on an event may be reached. This is a critical part of the ",(0,a.yg)("a",{parentName:"p",href:"KAACE"},"KAACE")," agreement algorithm (consensus) in KERI for establishing consensus between witnesses on the key state of a KERI identifier. "),(0,a.yg)("h2",{id:"more"},"More"),(0,a.yg)("p",null,"This consensus on key state forms the basis for accountability for a KERI controller, or what a person who controls a KERI identifier may be held legally responsible for."),(0,a.yg)("p",null,"This supermajority is also called a ",(0,a.yg)("em",{parentName:"p"},"sufficient majority")," that is labeled ",(0,a.yg)("em",{parentName:"p"},"immune")," from certain kinds of attacks or faults. "),(0,a.yg)("p",null,"From section ",(0,a.yg)("strong",{parentName:"p"},"11.4.2.4 Immune")," of v2.60 of the KERI whitepaper, "),(0,a.yg)("blockquote",null,(0,a.yg)("p",{parentName:"blockquote"},"Satisfaction of this constraint guarantees that at most one sufficient agreement occurs or none at\nall despite a dishonest controller but where at most F of the witnesses are potentially faulty.")),(0,a.yg)("p",null,"Ample Agreement Constraint:",(0,a.yg)("br",{parentName:"p"}),"\n",(0,a.yg)("img",{parentName:"p",src:"https://github.com/WebOfTrust/WOT-terms/assets/65027257/5c8733c1-4370-420c-83f0-f6e778a6b68f",alt:"image"})),(0,a.yg)("p",null,"Can apply to either"),(0,a.yg)("p",null,"1) a group of KERI witnesses for a witnessed event or\n2) a group of KERI identifier controllers participating in a multi-signature group."),(0,a.yg)("h3",{id:"problems-avoided-by-using-ample"},"Problems avoided by using ",(0,a.yg)("inlineCode",{parentName:"h3"},"ample")),(0,a.yg)("p",null,'Ample witnesses avoids problems of accidental lockout from a multisig group which would occur if the signing threshold for the multisig group was set lower than the "ample" number of participants.'),(0,a.yg)("h2",{id:"table-of-minimum-required-or-ample-number-of-participants"},"Table of minimum required, or ample, number of participants"),(0,a.yg)("p",null,"N = Number of total participants",(0,a.yg)("br",{parentName:"p"}),"\n",'M = Number of participants needed to get the guarantees of "ample"'),(0,a.yg)("p",null,(0,a.yg)("img",{parentName:"p",src:"https://github.com/WebOfTrust/WOT-terms/assets/65027257/01363aeb-7055-4413-bbc4-8f89325e703a",alt:"image"})),(0,a.yg)("h3",{id:"code-example"},"Code Example"),(0,a.yg)("p",null,"Python code implementation from ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/WebOfTrust/keripy/blob/development/src/keri/core/eventing.py"},"keri.core.eventing.py")," of the ",(0,a.yg)("inlineCode",{parentName:"p"},"ample")," algorithm used in ",(0,a.yg)("a",{parentName:"p",href:"KAACE"},"KAACE"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-python"},'def ample(n, f=None, weak=True):\n    """\n    Returns int as sufficient immune (ample) majority of n when n >=1\n        otherwise returns 0\n    Parameters:\n        n is int total number of elements\n        f is int optional fault number\n        weak is Boolean\n            If f is not None and\n                weak is True then minimize m for f\n                weak is False then maximize m for f that satisfies n >= 3*f+1\n            Else\n                weak is True then find maximum f and minimize m\n                weak is False then find maximum f and maximize m\n\n        n,m,f are subject to\n        f >= 1 if n > 0\n        n >= 3*f+1\n        (n+f+1)/2 <= m <= n-f\n    """\n    n = max(0, n)  # no negatives\n    if f is None:\n        f1 = max(1, max(0, n - 1) // 3)  # least floor f subject to n >= 3*f+1\n        f2 = max(1, ceil(max(0, n - 1) / 3))  # most ceil f subject to n >= 3*f+1\n        if weak:  # try both fs to see which one has lowest m\n            return min(n, ceil((n + f1 + 1) / 2), ceil((n + f2 + 1) / 2))\n        else:\n            return min(n, max(0, n - f1, ceil((n + f1 + 1) / 2)))\n    else:\n        f = max(0, f)\n        m1 = ceil((n + f + 1) / 2)\n        m2 = max(0, n - f)\n        if m2 < m1 and n > 0:\n            raise ValueError("Invalid f={} is too big for n={}.".format(f, n))\n        if weak:\n            return min(n, m1, m2)\n        else:\n            return min(n, max(m1, m2))\n')))}f.isMDXComponent=!0}}]);