"use strict";(self.webpackChunkwot_terms_docusaurus=self.webpackChunkwot_terms_docusaurus||[]).push([[85020],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>u});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=a.createContext({}),d=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(o.Provider,{value:t},e.children)},c="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),m=i,u=c["".concat(o,".").concat(m)]||c[m]||h[m]||r;return n?a.createElement(u,l(l({ref:t},p),{},{components:n})):a.createElement(u,l({ref:t},p))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[c]="string"==typeof e?e:i,l[1]=s;for(var d=2;d<r;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},73853:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var a=n(87462),i=(n(67294),n(3905));const r={},l=void 0,s={unversionedId:"resources/mdfiles/draft-pfeairheller-ptel",id:"resources/mdfiles/draft-pfeairheller-ptel",title:"draft-pfeairheller-ptel",description:'title: "Public Transaction Event Logs (PTEL)"',source:"@site/docs/05_resources/mdfiles/draft-pfeairheller-ptel.md",sourceDirName:"05_resources/mdfiles",slug:"/resources/mdfiles/draft-pfeairheller-ptel",permalink:"/WOT-terms/docs/resources/mdfiles/draft-pfeairheller-ptel",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"draft-pfeairheller-did-keri",permalink:"/WOT-terms/docs/resources/mdfiles/draft-pfeairheller-did-keri"},next:{title:"draft-ssmith-acdc",permalink:"/WOT-terms/docs/resources/mdfiles/draft-ssmith-acdc"}},o={},d=[{value:"Transaction Event Log",id:"transaction-event-log",level:2},{value:"Verifiable Credential Registry",id:"verifiable-credential-registry",level:2},{value:"Management TEL",id:"management-tel",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Registry Inception Event",id:"registry-inception-event",level:3},{value:"Registry Rotation Event",id:"registry-rotation-event",level:3},{value:"Verifiable Credential TELs",id:"verifiable-credential-tels",level:2},{value:"Self Addressing Identifiers",id:"self-addressing-identifiers",level:3},{value:"Derivation Process",id:"derivation-process",level:3},{value:"Self-Addressing Identifiers in a TEL",id:"self-addressing-identifiers-in-a-tel",level:2},{value:"Credential Issuance/Revocation TEL",id:"credential-issuancerevocation-tel",level:2},{value:"Simple Credential Issuance Event",id:"simple-credential-issuance-event",level:3},{value:"Simple Credential Revocation Event",id:"simple-credential-revocation-event",level:3},{value:"Credential Issuance Event",id:"credential-issuance-event",level:3},{value:"Credential Revocation Event",id:"credential-revocation-event",level:3},{value:"Use Case",id:"use-case",level:2},{value:"Security Considerations",id:"security-considerations",level:2}],p={toc:d},c="wrapper";function h(e){let{components:t,...n}=e;return(0,i.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,'title: "Public Transaction Event Logs (PTEL)"\nabbrev: "PTEL"\ndocname: draft-pfeairheller-ptel-latest\ncategory: info'),(0,i.kt)("p",null,"ipr: trust200902\narea: TODO\nworkgroup: TODO Working Group\nkeyword: Internet-Draft"),(0,i.kt)("p",null,"stand_alone: yes\nsmart_quotes: no\npi: ","[toc, sortrefs, symrefs]"),(0,i.kt)("p",null,"author:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"  name: Phil Feairheller\norganization: GLEIF\nemail: ",(0,i.kt)("a",{parentName:"li",href:"mailto:Philip.Feairheller@gleif.org"},"Philip.Feairheller@gleif.org"))),(0,i.kt)("p",null,"normative:"),(0,i.kt)("p",null,"informative:"),(0,i.kt)("p",null,"--- abstract"),(0,i.kt)("p",null,"TODO Abstract"),(0,i.kt)("p",null,"--- middle"),(0,i.kt)("h1",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"The ",(0,i.kt)("em",{parentName:"p"},"Transaction Event Log")," (TEL) is a hash linked data structure of transactions that can be used to track state. A\n",(0,i.kt)("em",{parentName:"p"},"Public Verifiable Credential Registry")," can be represented in several TELs to establish issuance or revocation state of\na Verifiable Credential (VC). The KEL is used to establish control authority over the keys used to commit to the events\nof the TEL and sign the VC. The events of the TEL are used to establish the issuance or revocation state of the VCs\nissued by the controller of the identifier represented by the KEL. This document specifies a design for ",(0,i.kt)("em",{parentName:"p"},"public"),"\nVCs only. The use of a hash digest of the VC contents as the identifier of that VC or an attribute in a TEL event allows\nfor correlation of uses of the VC."),(0,i.kt)("h2",{id:"transaction-event-log"},"Transaction Event Log"),(0,i.kt)("p",null,"A KERI KEL can control a TEL by anchoring the TEL to key events of the KEL with the following:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Create the inception event for the TEL with the TEL specific unique identifier."),(0,i.kt)("li",{parentName:"ol"},"Generate a hash digest of the serialized content of the TEL inception event."),(0,i.kt)("li",{parentName:"ol"},"Attach anchoring seals from the KEL events to the TEL events they are authorizing."),(0,i.kt)("li",{parentName:"ol"},"Sign the KEL event as usual to commit to the digest of the serialized TEL event.")),(0,i.kt)("p",null,"Any validator can cryptographically verify the authoritative state by validating the signatures of the referenced KEL.\nThe TEL events do not have to be signed as the commitment to the event is in the form of the digest in the seal in the\nanchoring KEL event and the signatures on that event. Like KEL events, all TEL events have the fields ",(0,i.kt)("inlineCode",{parentName:"p"},"i"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"s"),", and\n",(0,i.kt)("inlineCode",{parentName:"p"},"t"),". However, the ",(0,i.kt)("inlineCode",{parentName:"p"},"s"),' or sequence number field in TEL events represents the "clock" for that transaction set. Each\ntransaction set can have its own "clock" (e.g. bitcoin block height, wall clock, etc) and is independent of the sequence\nnumber of the KEL events. In the case of the Verifiable Credential Registry, the ',(0,i.kt)("inlineCode",{parentName:"p"},"s")," field is simply a monotonically\nincreasing integer."),(0,i.kt)("p",null,"The events are anchored back to the KEL using Event Source Seals whose JSON representation is as follows."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n "s": "3",\n "d": "ELvaU6Z-i0d8JJR2nmwyYAZAoTNZH3UfSVPzhzS6b5CM"\n}\n')),(0,i.kt)("p",null,"For TEL events, this seal back to the KEL will be delivered as an attachment of event source seal triples in duple of\n(s, d)."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"-GAB\n0AAAAAAAAAAAAAAAAAAAAAAw\nELvaU6Z-i0d8JJR2nmwyYAZAoTNZH3UfSVPzhzS6b5CM\n")),(0,i.kt)("p",null,"Event source seal attachment example (line feeds added for readability)"),(0,i.kt)("h2",{id:"verifiable-credential-registry"},"Verifiable Credential Registry"),(0,i.kt)("p",null,"A ",(0,i.kt)("em",{parentName:"p"},"Public Verifiable Credential Registry")," (Registry) is a form of a ",(0,i.kt)("em",{parentName:"p"},"Verifiable Data Registry")," that tracks the\nissuance/revocation state of credentials issued by the controller of the KEL. Two types of TELs will be used for this\npurpose. The first type of TEL is the management TEL and will signal the creation of the Registry and track the list of\nRegistrars that will act as Backers for the individual TELs for each VC. The second type of TEL is the VC TEL which will\ntrack the issued or revoked state of each VC and will contain a reference to it's corresponding management TEL."),(0,i.kt)("p",null,"The following events will be used to create and maintain the TELs for the Registry."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Ilk"),(0,i.kt)("th",{parentName:"tr",align:null},"TEL"),(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"vcp"),(0,i.kt)("td",{parentName:"tr",align:null},"Management"),(0,i.kt)("td",{parentName:"tr",align:null},"Registry Inception Event"),(0,i.kt)("td",{parentName:"tr",align:null},"Inception statement for the Registry")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"vrt"),(0,i.kt)("td",{parentName:"tr",align:null},"Management"),(0,i.kt)("td",{parentName:"tr",align:null},"Registry Rotation Event"),(0,i.kt)("td",{parentName:"tr",align:null},"Rotation event for updating Backers")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"iss"),(0,i.kt)("td",{parentName:"tr",align:null},"VC"),(0,i.kt)("td",{parentName:"tr",align:null},"Simple Credential Issuance Event"),(0,i.kt)("td",{parentName:"tr",align:null},"Issue credential with no Backers")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"rev"),(0,i.kt)("td",{parentName:"tr",align:null},"VC"),(0,i.kt)("td",{parentName:"tr",align:null},"Simple Credential Revocation Event"),(0,i.kt)("td",{parentName:"tr",align:null},"Revoke previously issued credential with no Backers")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"bis"),(0,i.kt)("td",{parentName:"tr",align:null},"VC"),(0,i.kt)("td",{parentName:"tr",align:null},"Credential Issuance Event"),(0,i.kt)("td",{parentName:"tr",align:null},"Issue credential")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"brv"),(0,i.kt)("td",{parentName:"tr",align:null},"VC"),(0,i.kt)("td",{parentName:"tr",align:null},"Credential Revocation Event"),(0,i.kt)("td",{parentName:"tr",align:null},"Revoke previously issued credential")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"iis"),(0,i.kt)("td",{parentName:"tr",align:null},"VC"),(0,i.kt)("td",{parentName:"tr",align:null},"Simple Credential Issuance Event with VC Hash"),(0,i.kt)("td",{parentName:"tr",align:null},"Issue credential with no Backers, VC Hash as separate field")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"irv"),(0,i.kt)("td",{parentName:"tr",align:null},"VC"),(0,i.kt)("td",{parentName:"tr",align:null},"Simple Credential Revocation Event with VC Hash"),(0,i.kt)("td",{parentName:"tr",align:null},"Revoke previously issued credential with no Backers, VC Hash as separate field")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ibs"),(0,i.kt)("td",{parentName:"tr",align:null},"VC"),(0,i.kt)("td",{parentName:"tr",align:null},"Credential Issuance Event with VC Hash"),(0,i.kt)("td",{parentName:"tr",align:null},"Issue credential, VC Hash as separate field")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ibr"),(0,i.kt)("td",{parentName:"tr",align:null},"VC"),(0,i.kt)("td",{parentName:"tr",align:null},"Credential Revocation Event with VC Hash"),(0,i.kt)("td",{parentName:"tr",align:null},"Revoke previously issued credential, VC Hash as separate field")))),(0,i.kt)("h2",{id:"management-tel"},"Management TEL"),(0,i.kt)("p",null,"The state tracked by the Management TEL will be the list of Registrar identifiers that serve as backers for each TEL\nunder its provenance. This list of Registrars can be rotated with events specific to this type of TEL. In this way,\nRegistrar lists are analogous to Backer lists in KERI KELs. Additional metadata can be tracked in this TEL, for example\nreferences to Schema. The Management TEL will have two events: ",(0,i.kt)("inlineCode",{parentName:"p"},"vcp")," for Registry inception and ",(0,i.kt)("inlineCode",{parentName:"p"},"vrt"),"\nfor rotation of the list or Registrars. The events will reference the controlling identifier in the ",(0,i.kt)("inlineCode",{parentName:"p"},"ii")," field and be\nanchored to the KEL with an event seal triple attachment."),(0,i.kt)("p",null,"The Registry specific identifier will be self-addressing (see ",(0,i.kt)("a",{parentName:"p",href:"#self-addressing-identifiers"},"below"),"\nfor definition) using its inception data for its derivation. This requires a commitment to the anchor in the controlling\nKEL and necessitates the event location seal be included in the event. The derived identifier is then set in the ",(0,i.kt)("inlineCode",{parentName:"p"},"i"),"\nfield of the events in the management TEL."),(0,i.kt)("p",null,"Though it is possible for a given identifier KEL to issue multiple types of credentials, it is anticipated that there\nwill be relatively few (usually one) Management TELs anchored to a given KEL. A more scalable approach to issuing\nmultiple credential types from a single identifier would be to use delegated identifiers for the different types of\ncredentials to be issued."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Label"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"v"),(0,i.kt)("td",{parentName:"tr",align:null},"version string"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"i"),(0,i.kt)("td",{parentName:"tr",align:null},"namespaced identifier of Registry"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"s"),(0,i.kt)("td",{parentName:"tr",align:null},"sequence number of event"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"t"),(0,i.kt)("td",{parentName:"tr",align:null},"message type  of event"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"p"),(0,i.kt)("td",{parentName:"tr",align:null},"prior event digest"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"c"),(0,i.kt)("td",{parentName:"tr",align:null},"list of Configuration Traits/Modes"),(0,i.kt)("td",{parentName:"tr",align:null},"allows for config of no backer registry")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"a"),(0,i.kt)("td",{parentName:"tr",align:null},"digest seal of attachment meta-data for registry"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ii"),(0,i.kt)("td",{parentName:"tr",align:null},"issuer identifier"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"vi"),(0,i.kt)("td",{parentName:"tr",align:null},"hash digest of VC contents"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"b"),(0,i.kt)("td",{parentName:"tr",align:null},"list of backer identifiers for credentials associated with this registry"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"bt"),(0,i.kt)("td",{parentName:"tr",align:null},"backer threshold"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ba"),(0,i.kt)("td",{parentName:"tr",align:null},"list of backers to add (ordered backer set)"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"br"),(0,i.kt)("td",{parentName:"tr",align:null},"list of backers to remove (ordered backer set)"),(0,i.kt)("td",{parentName:"tr",align:null})))),(0,i.kt)("h3",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"The simplest (and most common) case for Registries relies on the witnesses of the controlling KEL and their receipts of\nthe KEL events instead of Registry specific backers. To accommodate this case, the ",(0,i.kt)("inlineCode",{parentName:"p"},"c")," element is added to the\nmanagement TEL inception event with the configuration option ",(0,i.kt)("inlineCode",{parentName:"p"},"NB"),"  to specify that the Registry will never have backers\nconfigured in the management TEL. In this case, there will only be one event in the management TEL for this Registry and\nthe simple events ",(0,i.kt)("inlineCode",{parentName:"p"},"iss"),"\nand ",(0,i.kt)("inlineCode",{parentName:"p"},"rev"),' will be used for "simple issue" and "simple revoke" respectively in the VC specific TELs. For these events,\nthe ',(0,i.kt)("inlineCode",{parentName:"p"},"ri")," field will be the simple identifier referencing the management TEL."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Option"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"NB"),(0,i.kt)("td",{parentName:"tr",align:null},"No Backers"),(0,i.kt)("td",{parentName:"tr",align:null},"No registry specific backers will be configured for this Registry")))),(0,i.kt)("h3",{id:"registry-inception-event"},"Registry Inception Event"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n "v" : "KERI10JSON00011c_",\n "i" : "ELh3eYC2W_Su1izlvm0xxw01n3XK8bdV2Zb09IqlXB7A",\n "ii": "EJJR2nmwyYAfSVPzhzS6b5CMZAoTNZH3ULvaU6Z-i0d8",\n "s" : "0",\n "t" : "vcp",\n "b" : ["BbIg_3-11d3PYxSInLN-Q9_T2axD6kkXd3XRgbGZTm6s"],\n "c" : []\n "a" : {\n     "d": "EEBp64Aw2rsjdJpAR0e2qCq3jX7q7gLld3LjAwZgaLXU"\n  }\n}-GAB0AAAAAAAAAAAAAAAAAAAAABwEOWdT7a7fZwRz0jiZ0DJxZEM3vsNbLDPEUk-ODnif3O0\n')),(0,i.kt)("p",null,"Registry inception event for establishing the list of Backers"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n "v" : "KERI10JSON00011c_",\n "i" : "ELh3eYC2W_Su1izlvm0xxw01n3XK8bdV2Zb09IqlXB7A",\n "ii": "EJJR2nmwyYAfSVPzhzS6b5CMZAoTNZH3ULvaU6Z-i0d8",\n "s" : "0",\n "t" : "vcp",\n "b" : [],\n "c" : ["NB"]\n}-GAB0AAAAAAAAAAAAAAAAAAAAABwEOWdT7a7fZwRz0jiZ0DJxZEM3vsNbLDPEUk-ODnif3O0\n')),(0,i.kt)("p",null,'Registry inception event for "backer-less" configuration'),(0,i.kt)("h3",{id:"registry-rotation-event"},"Registry Rotation Event"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n "v" : "KERI10JSON00011c_",\n "i" : "ELh3eYC2W_Su1izlvm0xxw01n3XK8bdV2Zb09IqlXB7A",\n "p" : "EY2L3ycqK9645aEeQKP941xojSiuiHsw4Y6yTW-PmsBg",\n "s" : "1",\n "t" : "vrt",\n "ba" : ["BXhpfP_H41hw8f-LluTidLfXxmC4EPwaENHI6CuruE6g"],\n "br" : ["BbIg_3-11d3PYxSInLN-Q9_T2axD6kkXd3XRgbGZTm6s"]\n}-GAB0AAAAAAAAAAAAAAAAAAAAACQEOWdT7a7fZwRz0jiZ0DJxZEM3vsNbLDPEUk-ODnif3O0\n')),(0,i.kt)("p",null,"Registrar rotation event updates the list of Backers"),(0,i.kt)("h2",{id:"verifiable-credential-tels"},"Verifiable Credential TELs"),(0,i.kt)("p",null,"The binary state (issued or revoked) of each verifiable credential (VC) will be tracked in individual TELs associated\nwith each VC. The state changes will be represented by 4 sets of 2 events: ",(0,i.kt)("inlineCode",{parentName:"p"},"iss")," for simple VC issuance and ",(0,i.kt)("inlineCode",{parentName:"p"},"rev"),"\nfor simple revocation, ",(0,i.kt)("inlineCode",{parentName:"p"},"bis")," for the issuance of the VCs with backers and ",(0,i.kt)("inlineCode",{parentName:"p"},"brv")," for revocation of the VCs with backers\nand corresponding events ",(0,i.kt)("inlineCode",{parentName:"p"},"iis"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"irv")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"ibs"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ibr")," to be used when the identifier of the VC is not the\nself-addressing identifier of the VC and that identifier must be included is the separate ",(0,i.kt)("inlineCode",{parentName:"p"},"vi")," field in the event. The\nevents will be anchored to the KEL with an event seal triple attachment signified by the grouping counter ",(0,i.kt)("inlineCode",{parentName:"p"},"-e##"),"."),(0,i.kt)("h3",{id:"self-addressing-identifiers"},"Self Addressing Identifiers"),(0,i.kt)("p",null,"The advantage of a content addressable identifier is that it is cryptographically bound to the contents. It provides a\nsecure root-of-trust. Any cryptographic commitment to a content addressable identifier is functionally equivalent (given\ncomparable cryptographic strength) to a cryptographic commitment to the content itself."),(0,i.kt)("p",null,"A self-addressing identifier is a special class content-addressable identifier that is also self-referential. The\nspecial class is distinguished by a special derivation method or process to generate the self-addressing identifier.\nThis derivation method is determined by the combination of both a derivation code prefix included in the identifier and\nthe context in which the identifier appears. The reason for a special derivation method is that a naive cryptographic\ncontent addressable identifier must not be self-referential, i.e. the identifier must not appear within the contents\nthat it is identifying. This is because the naive cryptographic derivation process of a content addressable identifier\nis a cryptographic digest of the serialized content. Changing one bit of the serialization content will result in a\ndifferent digest. A special derivation method or process is required."),(0,i.kt)("h3",{id:"derivation-process"},"Derivation Process"),(0,i.kt)("p",null,"This process is as follows:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"replace the value of the id field in the content that will hold the self-addressing identifier with a dummy string of\nthe same length as the eventually derived self-addressing identifier"),(0,i.kt)("li",{parentName:"ul"},"compute the digest of the content with the dummy value for the id field"),(0,i.kt)("li",{parentName:"ul"},"prepend the derivation code to the digest and encode appropriately to create the final derived self-addressing\nidentifier replace the dummy value with the self-addressing identifier")),(0,i.kt)("p",null,"As long as any verifier recognizes the derivation method, the 'self-addressing` identifier is a cryptographically secure\ncommitment to the contents in which it is embedded. It is a cryptographically verifiable self-referential content\naddressable identifier."),(0,i.kt)("p",null,"Because a self-addressing identifier is both self-referential and cryptographically bound to the contents it identifies,\nanyone can validate this binding if they follow the binding protocol outlined above."),(0,i.kt)("p",null,"To elaborate, this approach of deriving self-referential identifiers from the contents they identify, we call\nself-addressing. It allows a verifier to verify or re-derive the self-referential identifier given the contents it\nidentifies. To clarify, a self-addressing identifier is different from a standard content address or content addressable\nidentifier in that a standard content addressable identifier may not be included inside the contents it addresses. The\nstandard content addressable identifier is computed on the finished immutable contents and therefore is not\nself-referential."),(0,i.kt)("h2",{id:"self-addressing-identifiers-in-a-tel"},"Self-Addressing Identifiers in a TEL"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ii")," issuer identifier is the controller prefix is self-certifying and may be also self-addressing (but may not be) wrt\nto its inception event  (For GLEIF TELS the issuer identifier must be self-addressing)"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"ri"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"i")," registry identifier is self-addressing wrt the registry inception event ",(0,i.kt)("inlineCode",{parentName:"p"},"i")," VC identifier is self-addressing\nwrt to the VC itself"),(0,i.kt)("p",null,"There are two options for including a cryptographic commitment to the VC in the TEL VC events. The identifier of the VC\ncan self-addressing using the same technique KERI uses for self-addressing identifiers. The VC identifier can be created\nby padding the VC ",(0,i.kt)("inlineCode",{parentName:"p"},"id")," field and taking a hash digest of the serialized contents of the VC. This form of self-addressing\nidentifier can be used as the ",(0,i.kt)("inlineCode",{parentName:"p"},"i")," field in the TEL ",(0,i.kt)("inlineCode",{parentName:"p"},"iss"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"rev"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"bis")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"brv")," events and no other reference to the VC\nis required. When the identifier of the VC is derived from some other method, the TEL events ",(0,i.kt)("inlineCode",{parentName:"p"},"iis"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"irv"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"ibs")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},"ibr")," are used, and a hash digest of the contents of the VC is placed in the ",(0,i.kt)("inlineCode",{parentName:"p"},"vi")," field."),(0,i.kt)("p",null,"The VC identifier can be namespaced using DID syntax. In this case, the VC identifier in the TEL events would be the\nmethod specific identifier of the full DID. For informational purposes, the fully qualified DID can be included as an\nattachment to the TEL events."),(0,i.kt)("p",null,"The list of backers needed to sign each VC TEL event is maintained by the management TEL. Since that list can change\nover time with the ",(0,i.kt)("inlineCode",{parentName:"p"},"rot")," management events listed above, the non-simple VC events (",(0,i.kt)("inlineCode",{parentName:"p"},"bis"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"brv"),") must be anchored to the\nevent in the management TEL at the point when the VC event is published with the ",(0,i.kt)("inlineCode",{parentName:"p"},"ra")," field. This way, the backer\nsignatures can be indexed into the proper list of backers at the time of issuance or revocation."),(0,i.kt)("h2",{id:"credential-issuancerevocation-tel"},"Credential Issuance/Revocation TEL"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Label"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"v"),(0,i.kt)("td",{parentName:"tr",align:null},"version string"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"i"),(0,i.kt)("td",{parentName:"tr",align:null},"namespaced identifier of VC"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"s"),(0,i.kt)("td",{parentName:"tr",align:null},"sequence number of event"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"t"),(0,i.kt)("td",{parentName:"tr",align:null},"message type  of event"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"dt"),(0,i.kt)("td",{parentName:"tr",align:null},"issuer system data/time in iso format"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"p"),(0,i.kt)("td",{parentName:"tr",align:null},"prior event digest"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ri"),(0,i.kt)("td",{parentName:"tr",align:null},"registry identifier from management TEL"),(0,i.kt)("td",{parentName:"tr",align:null})),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ra"),(0,i.kt)("td",{parentName:"tr",align:null},"registry anchor to management TEL"),(0,i.kt)("td",{parentName:"tr",align:null})))),(0,i.kt)("h3",{id:"simple-credential-issuance-event"},"Simple Credential Issuance Event"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n "v" : "KERI10JSON00011c_",\n "i" : "Ezpq06UecHwzy-K9FpNoRxCJp2wIGM9u2Edk-PLMZ1H4",\n "s" : "0",\n "t" : "iss",\n "dt": "2021-05-27T19:16:50.750302+00:00",\n "ri": "ELh3eYC2W_Su1izlvm0xxw01n3XK8bdV2Zb09IqlXB7A"\n}-GAB0AAAAAAAAAAAAAAAAAAAAAAwELvaU6Z-i0d8JJR2nmwyYAZAoTNZH3UfSVPzhzS6b5CM\n')),(0,i.kt)("h3",{id:"simple-credential-revocation-event"},"Simple Credential Revocation Event"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n "v" : "KERI10JSON00011c_",\n "i" : "Ezpq06UecHwzy-K9FpNoRxCJp2wIGM9u2Edk-PLMZ1H4",\n "s" : "1",\n "t" : "rev",\n "dt": "2021-05-27T19:16:50.750302+00:00",\n "p" : "EY2L3ycqK9645aEeQKP941xojSiuiHsw4Y6yTW-PmsBg"\n}-GAB0AAAAAAAAAAAAAAAAAAAAABAELvaU6Z-i0d8JJR2nmwyYAZAoTNZH3UfSVPzhzS6b5CM\n')),(0,i.kt)("h3",{id:"credential-issuance-event"},"Credential Issuance Event"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n "v" : "KERI10JSON00011c_",\n "i" : "Ezpq06UecHwzy-K9FpNoRxCJp2wIGM9u2Edk-PLMZ1H4",\n "s" : "0",\n "t" : "bis",\n "dt": "2021-05-27T19:16:50.750302+00:00",\n "ra": {\n    "i": "ELh3eYC2W_Su1izlvm0xxw01n3XK8bdV2Zb09IqlXB7A",\n    "s": "2",\n    "d": "Ezpq06UecHwzy-K9FpNoRxCJp2wIGM9u2Edk-PLMZ1H4"\n  }\n}-GAB0AAAAAAAAAAAAAAAAAAAAAAwELvaU6Z-i0d8JJR2nmwyYAZAoTNZH3UfSVPzhzS6b5CM\n')),(0,i.kt)("h3",{id:"credential-revocation-event"},"Credential Revocation Event"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{\n "v" : "KERI10JSON00011c_",\n "i" : "Ezpq06UecHwzy-K9FpNoRxCJp2wIGM9u2Edk-PLMZ1H4",\n "s" : "1",\n "t" : "brv",\n "dt": "2021-05-27T19:16:50.750302+00:00",\n "p" : "EY2L3ycqK9645aEeQKP941xojSiuiHsw4Y6yTW-PmsBg",\n "ra": {\n    "i": "ELh3eYC2W_Su1izlvm0xxw01n3XK8bdV2Zb09IqlXB7A",\n    "s": "4",\n    "d": "Ezpq06UecHwzy-K9FpNoRxCJp2wIGM9u2Edk-PLMZ1H4"\n  }\n}-GAB0AAAAAAAAAAAAAAAAAAAAABAELvaU6Z-i0d8JJR2nmwyYAZAoTNZH3UfSVPzhzS6b5CM\n')),(0,i.kt)("h2",{id:"use-case"},"Use Case"),(0,i.kt)("p",null,"The ",(0,i.kt)("em",{parentName:"p"},"Verifiable Legal Entity Identifier")," (vLEI) provides a lightweight, easy to understand use case for a ",(0,i.kt)("em",{parentName:"p"},"Transaction\nEvent Log")," as a ",(0,i.kt)("em",{parentName:"p"},"Verifiable Credential Registry"),". Issuing a VC has been described above. Verification of a VC will start\nwith the presentation of a vLEI VC as proof (all vLEI VCs are public and therefore proof presentation will include the\nentire vLEI VC). The verifier will extract the DID of the issuer from the VC, and calculate the hash digest of the\nserialized contents of the VC. By parsing the namespaced identifier of the VC, the verifier will perform the following\nsteps:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Retrieve the key state from the KERI did method (or appropriate DID method tunnel) using the controller identifier\nembedded in the VC identifier"),(0,i.kt)("li",{parentName:"ol"},"Retrieve and verify the KEL against the key state of the issuer"),(0,i.kt)("li",{parentName:"ol"},"Retrieve the management TEL using the Registry identifier embedded in the VC identifier and determine the Registrars\nto use to retrieve the VC TEL."),(0,i.kt)("li",{parentName:"ol"},"Retrieve the VC TEL and calculate the issuance/revocation state of the VC from the events in the TEL."),(0,i.kt)("li",{parentName:"ol"},"Using the keys from the KERI event to which the ",(0,i.kt)("inlineCode",{parentName:"li"},"iss")," event is anchored, verify the signature on the VC.")),(0,i.kt)("h2",{id:"security-considerations"},"Security Considerations"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"To avoid DDoS attack by flooding an Endorser with TEL events that are not associated with any identifiers they are\nassociated with, TEL events need to be placed in escrow until an anchoring KEL event is seen for the TEL identifier.")),(0,i.kt)("h1",{id:"iana-considerations"},"IANA Considerations"),(0,i.kt)("p",null,"This document has no IANA actions."),(0,i.kt)("p",null,"--- back"),(0,i.kt)("h1",{id:"acknowledgments"},"Acknowledgments"),(0,i.kt)("p",null,'{:numbered="false"}'),(0,i.kt)("p",null,"TODO acknowledge."))}h.isMDXComponent=!0}}]);